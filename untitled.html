<html><head></head><body><script type='module'>
	import {FactorioData} from './data.js';
	import {util} from './util.js';
	function resolveAll(ps){
	  // ps is {key:promise ...}
	  // returns a Promise that resolves to {key:promise value}
	  // will reject with any error
	  var values={};
	  return Object.entries(ps).map(([k,p])=>p.then(data=>{values[k]=data;})).reduce((p1,p2)=>p1.then(()=>p2)).then(()=>values);
	}
	var datap=fetch('SE.json').then(r=>r.json());
	var localep=fetch('SElocale.json').then(r=>r.json());
	resolveAll({'data':datap,'locale':localep}).then(d=>{
		window['data']=new FactorioData(d.data,d.locale);
	});
	window['util']=util;
  import * as mdata from './data.js';
  import * as mimage from './image.js';
  import * as mnormalize from './normalize.js';
  import * as mprocess from './process.js';
  import * as mtowiki from './towiki.js';
  import * as mutil from './util.js';
  import * as mwikiapi from './wikiapi.js';
  window.wiki='https://spaceexploration.miraheze.org';
  window.mdata=mdata;
	window.mimage=mimage;
	window.mnormalize=mnormalize;
	window.mprocess=mprocess;
	window.mtowiki=mtowiki;
	window.mutil=mutil;
	window.mwikiapi=mwikiapi;
</script>
<script>
	function getimage(data,size) {
    return mimage.makeicon(data,size).then(iconcanvas=>{
      var img=document.createElement('img');
      img.src=iconcanvas.toDataURL('image/png');
      document.querySelector('body').append(img);
    });
	}
</script></body></html>